cmake_minimum_required(VERSION 3.15)

project(rknn_model_zoo_3rdparty_libs)

set(CMAKE_CXX_STANDARD 14)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

set (TARGET_LIB_ARCH aarch64)

if (CMAKE_C_COMPILER MATCHES "uclibc")
    set (TARGET_LIB_ARCH ${TARGET_LIB_ARCH}_uclibc)
endif()

# stb image
set(STB_PATH ${CMAKE_CURRENT_SOURCE_DIR}/stb_image)
set(STB_INCLUDES ${STB_PATH} PARENT_SCOPE)

# rknnpool
set(THREAD_PATH ${CMAKE_CURRENT_SOURCE_DIR}/thread_pool)
set(THREAD_INCLUDES ${THREAD_PATH} PARENT_SCOPE)

# jpeg turbo
set(JPEG_PATH ${CMAKE_CURRENT_SOURCE_DIR}/jpeg_turbo)
set(LIBJPEG ${JPEG_PATH}/${CMAKE_SYSTEM_NAME}/${TARGET_LIB_ARCH}/libturbojpeg.a PARENT_SCOPE)
set(LIBJPEG_INCLUDES ${JPEG_PATH}/include PARENT_SCOPE)

# # OpenCV 路径
set(OPENCV_PATH ${CMAKE_CURRENT_SOURCE_DIR}/opencv)
# 自动抓取 lib 目录下的所有动态库或静态库
file(GLOB OPENCVLIBS "${OPENCV_PATH}/lib/libopencv_*")   # 如果是静态库用 *.a
# 将库路径也传给父级 CMake 使用
set(OPENCV_LIBS ${OPENCVLIBS} PARENT_SCOPE)
set(OPENCV_INCLUDES ${OPENCV_PATH}/include/opencv4 PARENT_SCOPE)




# rknn runtime
# for rknpu2
set(RKNN_PATH ${CMAKE_CURRENT_SOURCE_DIR}/rknpu2)
set(LIBRKNNRT ${RKNN_PATH}/${CMAKE_SYSTEM_NAME}/${TARGET_LIB_ARCH}/librknnrt.so)
set(LIBRKNNRT_INCLUDES ${RKNN_PATH}/include PARENT_SCOPE)


install(PROGRAMS ${LIBRKNNRT} DESTINATION lib)
set(LIBRKNNRT ${LIBRKNNRT} PARENT_SCOPE)

# rga
set(RGA_PATH ${CMAKE_CURRENT_SOURCE_DIR}/librga)
set(LIBRGA ${RGA_PATH}/${CMAKE_SYSTEM_NAME}/${TARGET_LIB_ARCH}/librga.a PARENT_SCOPE)
set(LIBRGA_INCLUDES ${RGA_PATH}/include PARENT_SCOPE)
install(PROGRAMS ${RGA_PATH}/${CMAKE_SYSTEM_NAME}/${TARGET_LIB_ARCH}/librga.so DESTINATION lib)


